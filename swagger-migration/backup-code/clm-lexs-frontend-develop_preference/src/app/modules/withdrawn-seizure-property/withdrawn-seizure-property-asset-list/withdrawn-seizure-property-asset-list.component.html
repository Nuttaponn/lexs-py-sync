<div [class.content-container]="!isAddMode">
  <ng-container *ngIf="propertyConfig.hasHeaderTitle">
    <div class="inner-container-padding-24">
      <div fxLayout="row" fxLayoutAlign="space-between center">
        <div class="title-text">
          <ng-container *ngIf="propertyConfig.headerTitleText">
            <h5 class="mt-12 mb-12 mr-12">
              {{ propertyConfig.headerTitleText | translate }}
            </h5>
          </ng-container>
          <ng-container *ngIf="!propertyConfig?.headerTitleText">
            <h5 class="mt-12 mb-12 mr-12">รายการทรัพย์ที่ต้องการถอนการยึดของผู้ติดต่อราย {{ title }}</h5>
          </ng-container>
        </div>
        <div fxLayout="row" fxLayoutGap="12px">
          <ng-container *ngIf="propertyConfig.hasGroupDelete">
            <div class="description mr-30 fill-red" (click)="deleteGroup()">
              <mat-icon [svgIcon]="'icon-Bin'" class="icon icon-xmedium icon-hide-show fill-red mr-5"></mat-icon>
              {{ 'COMMON.BUTTON_DELETE' | translate }}
            </div>
          </ng-container>

          <div class="description" (click)="isOpened = !isOpened">
            <mat-icon
              [svgIcon]="isOpened ? 'icon-Slide-Hide' : 'icon-Expand'"
              class="icon icon-xmedium icon-hide-show fill-blue mr-5">
            </mat-icon
            >{{ isOpened ? ('COMMON.ICON_EXPANSION_HIDE' | translate) : ('COMMON.ICON_EXPANSION_SHOW' | translate) }}
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <mat-accordion>
    <mat-expansion-panel [expanded]="isOpened" hideToggle>
      <mat-divider
        class="no-margin"
        *ngIf="propertyConfig.hasHeaderTitle && !propertyConfig?.headerTitleText"></mat-divider>

      <ng-container *ngIf="propertyConfig?.hasEditContact; else viewModeTemplate">
        <mat-tab-group
          [(selectedIndex)]="tabIndex"
          mat-align-tabs="start"
          (selectedTabChange)="onTabChanged($event)"
          [ngClass]="tabIndex === 0 ? 'mat-ink-bar-width-82' : 'mat-ink-bar-width-110'">
          <mat-tab label="0">
            <ng-template matTabLabel *ngIf="!collateralsSource || collateralsSource?.data?.length === 0">
              <span>{{ 'ทรัพย์จำนอง' | translate }}</span>
            </ng-template>
            <ng-template matTabLabel *ngIf="collateralsSource && collateralsSource.data.length > 0">
              <span class="bg-color-red" matBadge="{{ collateralsSource.data.length }}" matBadgeOverlap="false">{{
                'ทรัพย์จำนอง' | translate
              }}</span>
            </ng-template>
            <ng-template matTabContent>
              <div class="inner-container">
                <ng-container *ngIf="hasSoldItem">
                  <app-message-banner
                    type="warn-normal"
                    [message]="
                      'รายการทรัพย์มีการเปลี่ยนแปลงเนื่องจากบางทรัพย์ไม่สามารถถอนยึดทรัพย์ได้'
                    "></app-message-banner>
                </ng-container>
                <ng-container *ngIf="propertyConfig.hasFilter">
                  <div class="search-section pb-8 mt-24" fxLayout="row" fxLayoutAlign="center start" fxLayoutGap="12px">
                    <div fxFlex>
                      <spig-dropdown
                        classInput="input-xsm icon"
                        [formControl]="typeFilterControl"
                        [config]="dropdownFilterTypeConfig"
                        [options]="typeFilterOption"
                        (selectedOption)="applyFilter($event, TABLE_FILTER_KEY.TYPE)">
                      </spig-dropdown>
                    </div>
                    <div fxFlex>
                      <spig-dropdown
                        classInput="input-xsm icon"
                        [formControl]="statusFilterControl"
                        [config]="dropdownFilterStatusConfig"
                        [options]="statusFilterOption"
                        (selectedOption)="applyFilter($event, TABLE_FILTER_KEY.STATUS)"></spig-dropdown>
                    </div>
                    <div fxFlex>
                      <spig-dropdown
                        classInput="input-xsm icon"
                        [config]="dropdownSortConfig"
                        [options]="sortOption"
                        [formControl]="sortFilterControl"
                        (selectedOption)="sortSelected($event)"></spig-dropdown>
                    </div>
                  </div>
                </ng-container>

                <div fxLayout="row" fxLayoutAlign="space-between center" class="wsp-title">
                  <div fxFlex="">
                    <ng-container *ngIf="propertyConfig?.hasTitle">
                      <div class="title-text pt-16 pb-16 mt-16 mb-16">
                        <h6>ทรัพย์จำนอง</h6>
                      </div>
                    </ng-container>
                  </div>

                  <div fxFlex="70" fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="20px">
                    <ng-container *ngIf="propertyConfig?.hasAdd">
                      <div fxLayout="row" fxLayoutAlign="center center">
                        <button mat-stroked-button class="medium-aw-button mt-2 mb-10" (click)="addMoreProperty()">
                          <mat-icon [svgIcon]="'icon-Plus'" class="icon icon-xmedium"></mat-icon>
                          เพิ่ม
                        </button>
                      </div>
                    </ng-container>
                    <ng-container *ngIf="propertyConfig?.hasTitleTotal">
                      <span class="text-end total-label">
                        ทั้งหมด:
                        <span class="total-number bold">{{ collateralsSource.data.length }}</span>
                      </span>
                    </ng-container>
                    <ng-container *ngIf="propertyConfig.hasTotalSelect">
                      <span class="text-end total-label mr-0">
                        เลือก:
                        <span class="total-number bold"
                          >{{ selection.selected.length }} จาก {{ collaterals.length }}</span
                        >
                      </span>
                    </ng-container>
                    <div *ngIf="propertyConfig.hasTotalSelect && propertyConfig.hasSumAppraisalValue">
                      <span class="divider-vertical ml-0 mr-0"></span>
                    </div>
                    <ng-container *ngIf="propertyConfig.hasSumAppraisalValue">
                      <span class="text-end total-label">
                        ราคาประเมินรวมของราชการ (บาท):
                        <span class="total-number bold">{{ sumTotalAppraisalValue | numberDecimal }}</span>
                      </span>
                    </ng-container>
                  </div>
                </div>
                <div fxLayout="row" fxLayoutAlign="end center" class="wsp-title">
                  <spig-error-msg [control]="tablePropertyControl" [customErrorMsg]="'กรุณาเลือกทรัพย์ที่ต้องการถอน'">
                  </spig-error-msg>
                </div>
                <ng-container *ngIf="collateralsSource && collateralsSource.data.length > 0; else dataNotFound">
                  <div class="table-scroll section" table-scroll>
                    <table mat-table id="withdrawn-table" [dataSource]="collateralsSource.filteredData">
                      <ng-container *ngIf="propertyConfig?.hasSelect" matColumnDef="selection" sticky>
                        <th mat-header-cell *matHeaderCellDef>
                          <mat-checkbox
                            (change)="$event ? toggleAllRows() : null"
                            [checked]="selection.hasValue() && isAllSelected()"
                            [indeterminate]="hasValue() && !isAllSelected()">
                          </mat-checkbox>
                        </th>
                        <td mat-cell *matCellDef="let element">
                          <mat-checkbox
                            (click)="$event.stopPropagation()"
                            (change)="$event ? onCheckboxChange(element) : null"
                            [checked]="selection.isSelected(element.collateralId)">
                          </mat-checkbox>
                        </td>
                      </ng-container>
                      <ng-container matColumnDef="orderNumber" sticky>
                        <th mat-header-cell *matHeaderCellDef class="text-center" columnElevationLeft>
                          {{ 'COMMON.LABEL_NO' | translate }}
                        </th>
                        <td mat-cell *matCellDef="let element; let i = index" class="text-center" columnElevationLeft>
                          {{ indexTable(i) }}
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="collateralId">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>เลขที่หลักประกัน</th>
                        <td class="text-left" mat-cell *matCellDef="let element">
                          <span>
                            {{ element.collateralId || '-' }}
                          </span>
                          <ng-container *ngIf="element.status === LEXS_STATUS.SOLD">
                            <div class="status-label status-failed m-auto">ไม่สามารถถอน<br />ยึดทรัพย์ได้</div>
                          </ng-container>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="collateralTypeDesc">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>ประเภททรัพย์</th>
                        <td class="text-left" mat-cell *matCellDef="let element">
                          <span>
                            {{ element.collateralType || '-' }}
                          </span>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="collateralSubTypeDesc">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>ประเภทย่อย</th>
                        <td class="text-left" mat-cell *matCellDef="let element">
                          <span>{{ element.collateralSubType || '-' }}</span>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="documentNo">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>เลขที่เอกสารสิทธิ์</th>
                        <td class="text-left" mat-cell *matCellDef="let element">
                          <span>{{ element.documentNo || '-' }}</span>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="collateralDetails">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>รายละเอียดทรัพย์</th>
                        <td class="text-left" mat-cell *matCellDef="let element">
                          <span>{{ element.collateralDetails || '-' }}</span>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="ownerId">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>เจ้าของกรรมสิทธิ์</th>
                        <td class="text-left" mat-cell *matCellDef="let element">
                          <ng-container *ngIf="isEditMode; else ledViewMode">
                            <span>{{
                              element.owners || element.ownerId || element.ownerFullName || element.ownerName || '-'
                            }}</span>
                          </ng-container>
                          <ng-template #ledViewMode>
                            <span>{{
                              element.owners || element.ownerId || element.ownerFullName || element.ownerName
                                | ownerName
                            }}</span>
                          </ng-template>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="totalAppraisalValue">
                        <th mat-header-cell *matHeaderCellDef class="new-line text-right">
                          <div fxLayout="row" fxLayoutAlign="end start">
                            <div fxLayout="row" fxLayoutAlign="end start" fxFlex="5">
                              {{ 'SEIZURE_PROPERTY.SEIZURE_LIST_INFO.TOTAL_APPRAISAL_VALUE' | translate }}
                            </div>
                            <div fxLayout="row" fxLayoutAlign="center end">
                              <app-tooltip
                                [iconClass]="'icon-small  icon-fill-white mt-10'"
                                [params]="[
                                  { content: 'ราคาประเมินของธนาคาร: ' + 'ทรัพย์จำนอง' },
                                  { content: 'ราคาประเมินราชการ: ' + 'ทรัพย์นอกจำนอง' },
                                ]">
                              </app-tooltip>
                            </div>
                          </div>
                        </th>
                        <td mat-cell *matCellDef="let element" class="text-right">
                          <span>{{ element.totalAppraisalValue | numberDecimal }}</span>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="ledRefNo">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>เลขที่เก็บ</th>
                        <td class="text-left" mat-cell *matCellDef="let element">
                          <span>{{ element.ledRefNo || '-' }}</span>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="ledName">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>สำนักงานบังคับคดี</th>
                        <td class="text-left" mat-cell *matCellDef="let element">
                          <span>{{ element.ledName || '-' }}</span>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="status" [stickyEnd]="true">
                        <th mat-header-cell *matHeaderCellDef columnElevationRight class="text-center">
                          สถานะทรัพย์ <br />
                          (LEXS)
                        </th>

                        <td mat-cell *matCellDef="let element" class="text-center" columnElevationRight>
                          <div fxLayout="row" fxLayoutAlign="center center">
                            <ng-container *ngIf="!element.status || element.status === '-'">
                              <span>-</span>
                            </ng-container>
                            <!-- <ng-container *ngIf="element.status === LEXS_STATUS.PLEDGE">
                              <div class="status-label status-normal m-auto">ไม่ถูกยึด / อายัด / ขาย</div>
                            </ng-container> -->
                            <ng-container *ngIf="element.status === LEXS_STATUS.SEIZURED">
                              <div class="status-label status-success m-auto">ยึดทรัพย์แล้ว</div>
                            </ng-container>

                            <ng-container *ngIf="element.status === LEXS_STATUS.ON_SALE">
                              <div class="status-label status-pending m-auto">อยู่ระหว่างขายทอดตลาด</div>
                            </ng-container>

                            <ng-container *ngIf="element.status === LEXS_STATUS.PENDING_SALE">
                              <div class="status-label status-pending m-auto">รอประกาศขายทอดตลาดใหม่</div>
                            </ng-container>
                            <!-- <ng-container *ngIf="element.status === LEXS_STATUS.SOLD">
                              <div class="status-label status-success m-auto">
                                <mat-icon svgIcon="icon-Mark"
                                  class="icon icon-small-xl fill-krungthai-green mr-4"></mat-icon>ขายทอดตลาดแล้ว
                              </div>
                            </ng-container> -->
                          </div>
                        </td>
                      </ng-container>

                      <ng-container *ngIf="propertyConfig?.hasAction" matColumnDef="action" [stickyEnd]="true">
                        <th class="text-center action-cell" mat-header-cell *matHeaderCellDef>
                          {{ 'COMMON.LABEL_COMMAND' | translate }}
                        </th>
                        <td mat-cell class="action-cell" *matCellDef="let element">
                          <ng-container *ngIf="element.status !== LEXS_STATUS.SOLD; else elseTemplate">
                            <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="30px">
                              <ng-container *ngIf="propertyConfig.hasDelete">
                                <span (click)="deleteProperty(element)" class="link link-red">{{
                                  'COMMON.BUTTON_DELETE' | translate
                                }}</span>
                              </ng-container>
                              <ng-container *ngIf="propertyConfig.hasEdit">
                                <span (click)="editProperty(element)" class="link">{{
                                  'COMMON.BUTTON_EDIT' | translate
                                }}</span>
                              </ng-container>
                            </div>
                          </ng-container>
                          <ng-template #elseTemplate>
                            <span>&nbsp;</span>
                          </ng-template>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="collateralColumns"></tr>
                      <tr mat-row *matRowDef="let row; columns: collateralColumns"></tr>
                    </table>
                  </div>
                  <app-message-empty
                    *ngIf="collateralsSource.data.length === 0 || collateralsSource.filteredData.length === 0"
                    message="WITHDRAWN_SEIZURE_PROPERTY.COLLATERAL.NO_ASSETS_CAN_BE_SEIZED">
                  </app-message-empty>

                  <app-paginator
                    *ngIf="allCurrentData.length > 0"
                    #paginator
                    [pageSize]="pageSize"
                    [length]="allCurrentData.length"
                    (page)="onPaging($event)"></app-paginator>
                </ng-container>
                <ng-template #dataNotFound>
                  <div class="table-content">
                    <div class="table-scroll" table-scroll>
                      <table mat-table id="withdrawn-table">
                        <ng-container matColumnDef="orderNumber">
                          <th mat-header-cell *matHeaderCellDef class="text-center">
                            {{ 'COMMON.LABEL_NO' | translate }}
                          </th>
                        </ng-container>

                        <ng-container matColumnDef="collateralId">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>เลขที่หลักประกัน</th>
                        </ng-container>

                        <ng-container matColumnDef="collateralTypeDesc">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>ประเภททรัพย์</th>
                        </ng-container>

                        <ng-container matColumnDef="collateralSubTypeDesc">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>ประเภทย่อย</th>
                        </ng-container>

                        <ng-container matColumnDef="documentNo">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>เลขที่เอกสารสิทธิ์</th>
                        </ng-container>

                        <ng-container matColumnDef="collateralDetails">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>รายละเอียดทรัพย์</th>
                        </ng-container>

                        <ng-container matColumnDef="ownerId">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>เจ้าของกรรมสิทธิ์</th>
                        </ng-container>

                        <ng-container matColumnDef="totalAppraisalValue">
                          <th mat-header-cell *matHeaderCellDef class="new-line text-right">
                            <div fxLayout="row" fxLayoutAlign="end start">
                              <div fxLayout="row" fxLayoutAlign="end start" fxFlex="5">
                                {{ 'SEIZURE_PROPERTY.SEIZURE_LIST_INFO.TOTAL_APPRAISAL_VALUE' | translate }}
                              </div>
                              <div fxLayout="row" fxLayoutAlign="center end">
                                <app-tooltip
                                  [iconClass]="'icon-small  icon-fill-white mt-10'"
                                  [params]="[
                                    { content: 'ราคาประเมินของธนาคาร: ' + 'ทรัพย์จำนอง' },
                                    { content: 'ราคาประเมินราชการ: ' + 'ทรัพย์นอกจำนอง' },
                                  ]">
                                </app-tooltip>
                              </div>
                            </div>
                          </th>
                        </ng-container>

                        <ng-container matColumnDef="ledRefNo">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>เลขที่เก็บ</th>
                        </ng-container>

                        <ng-container matColumnDef="ledName">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>สำนักงานบังคับคดี</th>
                        </ng-container>

                        <ng-container matColumnDef="status" [stickyEnd]="true">
                          <th mat-header-cell *matHeaderCellDef columnElevationRight class="text-center">
                            สถานะทรัพย์ <br />
                            (LEXS)
                          </th>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="collateralColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: collateralColumns"></tr>
                      </table>
                    </div>
                    <app-message-empty
                      [message]="'WITHDRAWN_SEIZURE_PROPERTY.COLLATERAL.NO_ASSETS_CAN_BE_SEIZED'"></app-message-empty>
                  </div>
                </ng-template>
              </div>
            </ng-template>
          </mat-tab>
          <mat-tab label="1">
            <span>{{ 'ทรัพย์นอกจำนอง' | translate }}</span>
            <ng-template
              matTabLabel
              *ngIf="((collateralsSourceAsset && collateralsSourceAsset.data.length) || 0) === 0">
              <span>{{ 'ทรัพย์นอกจำนอง' | translate }}</span>
            </ng-template>
            <ng-template matTabLabel *ngIf="collateralsSourceAsset && collateralsSourceAsset.data.length > 0">
              <span class="bg-color-red" matBadge="{{ collateralsSourceAsset.data.length }}" matBadgeOverlap="false">{{
                'ทรัพย์นอกจำนอง' | translate
              }}</span>
            </ng-template>
            <ng-template matTabContent>
              <div class="inner-container">
                <ng-container *ngIf="hasSoldItem">
                  <app-message-banner
                    type="warn-normal"
                    [message]="
                      'รายการทรัพย์มีการเปลี่ยนแปลงเนื่องจากบางทรัพย์ไม่สามารถถอนยึดทรัพย์ได้'
                    "></app-message-banner>
                </ng-container>
                <ng-container *ngIf="assetConfig.hasFilter">
                  <div class="search-section pb-8 mt-24" fxLayout="row" fxLayoutAlign="center start" fxLayoutGap="12px">
                    <div fxFlex>
                      <spig-dropdown
                        classInput="input-xsm icon"
                        [formControl]="typeFilterControlAsset"
                        [config]="dropdownFilterTypeConfig"
                        [options]="typeAssetFilterOption"
                        (selectedOption)="applyFilterAsset($event, TABLE_FILTER_KEY.TYPE_ASSET)">
                      </spig-dropdown>
                    </div>
                    <div fxFlex>
                      <spig-dropdown
                        classInput="input-xsm icon"
                        [formControl]="statusFilterControlAsset"
                        [config]="dropdownFilterStatusConfig"
                        [options]="statusFilterOption"
                        (selectedOption)="applyFilterAsset($event, TABLE_FILTER_KEY.STATUS_ASSET)"></spig-dropdown>
                    </div>
                    <div fxFlex>
                      <spig-dropdown
                        classInput="input-xsm icon"
                        [config]="dropdownNoSortConfig"
                        [options]="sortNoOption"
                        [formControl]="sortNoFilterControl"
                        (selectedOption)="sortSelectedAsset($event)"></spig-dropdown>
                    </div>
                  </div>
                </ng-container>

                <div fxLayout="row" fxLayoutAlign="space-between center" class="wsp-title">
                  <div fxFlex="">
                    <ng-container *ngIf="assetConfig?.hasTitle">
                      <div class="title-text pt-16 pb-16 mt-16 mb-16">
                        <h6>ทรัพย์นอกจำนอง</h6>
                      </div>
                    </ng-container>
                  </div>

                  <div fxFlex="70" fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="20px">
                    <ng-container *ngIf="assetConfig?.hasAdd">
                      <div fxLayout="row" fxLayoutAlign="center center">
                        <button mat-stroked-button class="medium-aw-button mt-2 mb-10" (click)="addMorePropertyAsset()">
                          <mat-icon [svgIcon]="'icon-Plus'" class="icon icon-xmedium"></mat-icon>
                          เพิ่ม
                        </button>
                      </div>
                    </ng-container>
                    <ng-container *ngIf="assetConfig?.hasTitleTotal">
                      <span class="text-end total-label">
                        ทั้งหมด:
                        <span class="total-number bold">{{ collateralsSourceAsset.data.length }}</span>
                      </span>
                    </ng-container>
                    <ng-container *ngIf="assetConfig.hasTotalSelect">
                      <span class="text-end total-label mr-0">
                        เลือก:
                        <span class="total-number bold"
                          >{{ selectionAsset.selected.length }} จาก {{ asset.length }}</span
                        >
                      </span>
                    </ng-container>
                    <div *ngIf="assetConfig.hasTotalSelect && assetConfig.hasSumAppraisalValue">
                      <span class="divider-vertical ml-0 mr-0"></span>
                    </div>
                    <ng-container *ngIf="assetConfig.hasSumAppraisalValue">
                      <span class="text-end total-label">
                        ราคาประเมินรวมของราชการ(บาท):
                        <span class="total-number bold">{{ sumTotalAppraisalValueAsset | numberDecimal }}</span>
                      </span>
                    </ng-container>
                  </div>
                </div>
                <div fxLayout="row" fxLayoutAlign="end center" class="wsp-title">
                  <spig-error-msg
                    [control]="tablePropertyAssetControl"
                    [customErrorMsg]="'กรุณาเลือกทรัพย์ที่ต้องการถอน'">
                  </spig-error-msg>
                </div>
                <ng-container
                  *ngIf="collateralsSourceAsset && collateralsSourceAsset.data.length > 0; else dataNotFoundOther">
                  <div class="table-scroll section" table-scroll>
                    <table mat-table id="withdrawn-table" [dataSource]="collateralsSourceAsset.filteredData">
                      <ng-container *ngIf="assetConfig?.hasSelect" matColumnDef="selection" sticky>
                        <th mat-header-cell *matHeaderCellDef columnElevationLeft>
                          <mat-checkbox
                            (change)="$event ? toggleAllRowsAsset() : null"
                            [checked]="selectionAsset.hasValue() && isAllSelectedAsset()"
                            [indeterminate]="hasValueAsset() && !isAllSelectedAsset()">
                          </mat-checkbox>
                        </th>
                        <td mat-cell *matCellDef="let element" columnElevationLeft>
                          <mat-checkbox
                            (click)="$event.stopPropagation()"
                            (change)="$event ? onCheckboxChangeAsset(element) : null"
                            [checked]="selectionAsset.isSelected(element.assetId.toString())">
                          </mat-checkbox>
                        </td>
                      </ng-container>
                      <ng-container matColumnDef="orderNumber" sticky>
                        <th mat-header-cell *matHeaderCellDef class="text-center">
                          {{ 'COMMON.LABEL_NO' | translate }}
                        </th>
                        <td mat-cell *matCellDef="let element; let i = index" class="text-center">
                          {{ indexTableAsset(i) }}
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="collateralTypeDesc">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>ประเภททรัพย์</th>
                        <td class="text-left" mat-cell *matCellDef="let element">
                          <span>
                            {{ element.assetTypeDesc || '-' }}
                          </span>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="collateralSubTypeDesc">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>ประเภทย่อย</th>
                        <td class="text-left" mat-cell *matCellDef="let element">
                          <span>{{ element.assetSubTypeDesc || '-' }}</span>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="documentNo">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>เลขที่เอกสารสิทธิ์</th>
                        <td class="text-left" mat-cell *matCellDef="let element">
                          <span>{{ element.documentNo || '-' }}</span>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="collateralDetails">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>รายละเอียดทรัพย์</th>
                        <td class="text-left" mat-cell *matCellDef="let element">
                          <span>{{ element.collateralDetails || '-' }}</span>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="ownerId">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>เจ้าของกรรมสิทธิ์</th>
                        <td class="text-left" mat-cell *matCellDef="let element">
                          <ng-container *ngIf="isEditModeAsset; else ledViewMode">
                            <span>{{
                              element.owners || element.ownerId || element.ownerFullName || element.ownerName || '-'
                            }}</span>
                          </ng-container>
                          <ng-template #ledViewMode>
                            <span>{{
                              element.owners || element.ownerId || element.ownerFullName || element.ownerName
                                | ownerName
                            }}</span>
                          </ng-template>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="totalAppraisalValue">
                        <th mat-header-cell *matHeaderCellDef class="new-line text-right">
                          <div fxLayout="row" fxLayoutAlign="end start">
                            <div fxLayout="row" fxLayoutAlign="end start" fxFlex="5">
                              {{ 'SEIZURE_PROPERTY.SEIZURE_LIST_INFO.TOTAL_APPRAISAL_VALUE' | translate }}
                            </div>
                            <div fxLayout="row" fxLayoutAlign="center end">
                              <app-tooltip
                                [iconClass]="'icon-small  icon-fill-white mt-10'"
                                [params]="[
                                  { content: 'ราคาประเมินของธนาคาร: ' + 'ทรัพย์จำนอง' },
                                  { content: 'ราคาประเมินราชการ: ' + 'ทรัพย์นอกจำนอง' },
                                ]">
                              </app-tooltip>
                            </div>
                          </div>
                        </th>
                        <td mat-cell *matCellDef="let element" class="text-right">
                          <span>{{ (element.totalAppraisalValue | numberDecimal) || '-' }}</span>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="ledRefNo">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>เลขที่เก็บ</th>
                        <td class="text-left" mat-cell *matCellDef="let element">
                          <span>{{ element.ledRefNo || '-' }}</span>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="ledName">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>สำนักงานบังคับคดี</th>
                        <td class="text-left" mat-cell *matCellDef="let element">
                          <span>{{ element.ledName || '-' }}</span>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="obligationStatus">
                        <th mat-header-cell *matHeaderCellDef class="text-center min-width-135px">
                          {{ 'สถานะทรัพย์ที่สืบพบ' | translate }}
                        </th>
                        <td mat-cell *matCellDef="let element" class="text-center min-width-135px">
                          <div class="status-label status-normal m-auto">
                            {{ element.obligationStatus || 'ไม่มี' }}
                          </div>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="status" [stickyEnd]="true">
                        <th mat-header-cell *matHeaderCellDef columnElevationRight class="text-center">
                          สถานะทรัพย์ <br />
                          (LEXS)
                        </th>

                        <td mat-cell *matCellDef="let element" class="text-center" columnElevationRight>
                          <div fxLayout="row" fxLayoutAlign="center center">
                            <ng-container
                              *ngIf="!element.collateralCaseLexStatus || element.collateralCaseLexStatus === '-'">
                              <span>-</span>
                            </ng-container>
                            <!-- <ng-container *ngIf="element.collateralCaseLexStatus === LEXS_STATUS.PLEDGE">
                              <div class="status-label status-normal m-auto">ไม่ถูกยึด / อายัด / ขาย</div>
                            </ng-container> -->
                            <ng-container *ngIf="element.collateralCaseLexStatus === LEXS_STATUS.SEIZURED">
                              <div class="status-label status-success m-auto">ยึดทรัพย์</div>
                            </ng-container>

                            <ng-container *ngIf="element.collateralCaseLexStatus === LEXS_STATUS.ON_SALE">
                              <div class="status-label status-pending m-auto">อยู่ระหว่างขายทอดตลาด</div>
                            </ng-container>

                            <ng-container *ngIf="element.collateralCaseLexStatus === LEXS_STATUS.PENDING_SALE">
                              <div class="status-label status-pending m-auto">รอประกาศขายทอดตลาดใหม่</div>
                            </ng-container>
                            <!-- <ng-container *ngIf="element.collateralCaseLexStatus === LEXS_STATUS.SOLD">
                              <div class="status-label status-success m-auto">
                                <mat-icon svgIcon="icon-Mark"
                                  class="icon icon-small-xl fill-krungthai-green mr-4"></mat-icon>ขายทอดตลาดแล้ว
                              </div>
                            </ng-container> -->
                          </div>
                        </td>
                      </ng-container>

                      <ng-container *ngIf="assetConfig?.hasAction" matColumnDef="action" [stickyEnd]="true">
                        <th class="text-center action-cell" mat-header-cell *matHeaderCellDef>
                          {{ 'COMMON.LABEL_COMMAND' | translate }}
                        </th>
                        <td mat-cell class="action-cell" *matCellDef="let element">
                          <ng-container *ngIf="element.collateralCaseLexStatus !== LEXS_STATUS.SOLD; else elseTemplate">
                            <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="30px">
                              <ng-container *ngIf="assetConfig.hasDelete">
                                <span (click)="deletePropertyAsset(element)" class="link link-red">{{
                                  'COMMON.BUTTON_DELETE' | translate
                                }}</span>
                              </ng-container>
                              <ng-container *ngIf="assetConfig.hasEdit">
                                <span (click)="editPropertyAsset(element)" class="link">{{
                                  'COMMON.BUTTON_EDIT' | translate
                                }}</span>
                              </ng-container>
                            </div>
                          </ng-container>
                          <ng-template #elseTemplate>
                            <span>&nbsp;</span>
                          </ng-template>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="assetColumns"></tr>
                      <tr mat-row *matRowDef="let row; columns: assetColumns"></tr>
                    </table>
                  </div>

                  <app-message-empty
                    *ngIf="collateralsSourceAsset.data.length === 0 || collateralsSourceAsset.filteredData.length === 0"
                    message="WITHDRAWN_SEIZURE_PROPERTY.COLLATERAL.NO_ASSETS_CAN_BE_SEIZED">
                  </app-message-empty>

                  <app-paginator
                    *ngIf="allCurrentDataAsset.length > 0"
                    #paginator1
                    [pageSize]="pageSizeAsset"
                    [length]="allCurrentDataAsset.length"
                    (page)="onPagingAsset($event)"></app-paginator>
                </ng-container>
                <ng-template #dataNotFoundOther>
                  <div class="table-scroll section" table-scroll>
                    <table mat-table id="withdrawn-table">
                      <ng-container matColumnDef="orderNumber">
                        <th mat-header-cell *matHeaderCellDef class="text-center">
                          {{ 'COMMON.LABEL_NO' | translate }}
                        </th>
                      </ng-container>

                      <ng-container matColumnDef="collateralTypeDesc">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>ประเภททรัพย์</th>
                      </ng-container>

                      <ng-container matColumnDef="collateralSubTypeDesc">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>ประเภทย่อย</th>
                      </ng-container>

                      <ng-container matColumnDef="documentNo">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>เลขที่เอกสารสิทธิ์</th>
                      </ng-container>

                      <ng-container matColumnDef="collateralDetails">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>รายละเอียดทรัพย์</th>
                      </ng-container>

                      <ng-container matColumnDef="ownerId">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>เจ้าของกรรมสิทธิ์</th>
                      </ng-container>

                      <ng-container matColumnDef="totalAppraisalValue">
                        <th mat-header-cell *matHeaderCellDef class="new-line text-right">
                          <div fxLayout="row" fxLayoutAlign="end start">
                            <div fxLayout="row" fxLayoutAlign="end start" fxFlex="5">
                              {{ 'SEIZURE_PROPERTY.SEIZURE_LIST_INFO.TOTAL_APPRAISAL_VALUE' | translate }}
                            </div>
                            <div fxLayout="row" fxLayoutAlign="center end">
                              <app-tooltip
                                [iconClass]="'icon-small  icon-fill-white mt-10'"
                                [params]="[
                                  { content: 'ราคาประเมินของธนาคาร: ' + 'ทรัพย์จำนอง' },
                                  { content: 'ราคาประเมินราชการ: ' + 'ทรัพย์นอกจำนอง' },
                                ]">
                              </app-tooltip>
                            </div>
                          </div>
                        </th>
                      </ng-container>

                      <ng-container matColumnDef="ledRefNo">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>เลขที่เก็บ</th>
                      </ng-container>

                      <ng-container matColumnDef="ledName">
                        <th class="text-left" mat-header-cell *matHeaderCellDef>สำนักงานบังคับคดี</th>
                      </ng-container>

                      <ng-container matColumnDef="obligationStatus">
                        <th mat-header-cell *matHeaderCellDef class="text-center min-width-135px">
                          สถานะทรัพย์ที่สืบพบ
                        </th>
                      </ng-container>

                      <ng-container matColumnDef="status" [stickyEnd]="true">
                        <th mat-header-cell *matHeaderCellDef columnElevationRight class="text-center">
                          สถานะทรัพย์ <br />
                          (LEXS)
                        </th>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="assetColumns"></tr>
                      <tr mat-row *matRowDef="let row; columns: assetColumns"></tr>
                    </table>
                  </div>
                  <app-message-empty
                    [message]="'WITHDRAWN_SEIZURE_PROPERTY.COLLATERAL.NO_ASSETS_CAN_BE_SEIZED'"></app-message-empty>
                </ng-template>
              </div>
            </ng-template>
          </mat-tab>
        </mat-tab-group>
      </ng-container>
      <ng-template #viewModeTemplate>
        <!-- ทรัพย์จำนอง -->
        <ng-container
          *ngIf="collateralsSource.data && collateralsSource.data.length > 0; else nodataForAddPropertyModal">
          <div
            *ngIf="!propertyConfig?.hasAdd && (config.tabCollapse || config.tabCollapse === undefined)"
            fxLayout="row"
            fxLayoutAlign="space-between center"
            class="pa-8 mt-16 app-document-header bg-l-gray"
            fxLayoutGap="24"
            [class.mb-16]="expanded">
            <div fxLayoutAlign="flex-start stretch" fxLayoutGap="24">
              <div fxLayoutAlign="start center" fxLayoutGap="24">
                <h6 class="my-0 title-bar-color">{{ 'ทรัพย์จำนอง' | translate }}</h6>
              </div>
            </div>
            <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="32">
              <div class="wsp-title">
                <span class="text-end total-label">
                  ทั้งหมด:
                  <span class="total-number bold">{{ collateralsSource.data.length }}</span>
                </span>
              </div>
              <div class="expand-button mr-16" (click)="expandPanel()">
                <mat-icon
                  [svgIcon]="!!expanded ? 'icon-Slide-Hide' : 'icon-Expand'"
                  class="icon icon-xmedium icon-hide-show title-bar-color">
                </mat-icon>
                <span class="ml-6">{{
                  !!expanded ? ('COMMON.ICON_EXPANSION_HIDE' | translate) : ('COMMON.ICON_EXPANSION_SHOW' | translate)
                }}</span>
              </div>
            </div>
          </div>

          <mat-expansion-panel class="padding-zero" [expanded]="expanded">
            <div class="inner-container">
              <ng-container *ngIf="hasSoldItem">
                <app-message-banner
                  type="warn-normal"
                  [message]="
                    'รายการทรัพย์มีการเปลี่ยนแปลงเนื่องจากบางทรัพย์ไม่สามารถถอนยึดทรัพย์ได้'
                  "></app-message-banner>
              </ng-container>
              <ng-container *ngIf="propertyConfig.hasFilter">
                <div class="search-section pb-8" fxLayout="row" fxLayoutAlign="center start" fxLayoutGap="12px">
                  <div fxFlex>
                    <spig-dropdown
                      classInput="input-xsm icon"
                      [formControl]="typeFilterControl"
                      [config]="dropdownFilterTypeConfig"
                      [options]="typeFilterOption"
                      (selectedOption)="applyFilter($event, TABLE_FILTER_KEY.TYPE)">
                    </spig-dropdown>
                  </div>
                  <div fxFlex>
                    <spig-dropdown
                      classInput="input-xsm icon"
                      [formControl]="statusFilterControl"
                      [config]="dropdownFilterStatusConfig"
                      [options]="statusFilterOption"
                      (selectedOption)="applyFilter($event, TABLE_FILTER_KEY.STATUS)"></spig-dropdown>
                  </div>
                  <div fxFlex>
                    <spig-dropdown
                      classInput="input-xsm icon"
                      [config]="dropdownSortConfig"
                      [options]="sortOption"
                      [formControl]="sortFilterControl"
                      (selectedOption)="sortSelected($event)"></spig-dropdown>
                  </div>
                </div>
              </ng-container>
              <div *ngIf="propertyConfig?.hasAdd" fxLayout="row" fxLayoutAlign="space-between center" class="wsp-title">
                <div fxFlex="">
                  <ng-container
                    *ngIf="propertyConfig?.hasTitle && (config.tabCollapse || config.tabCollapse === undefined)">
                    <div class="title-text pt-16 pb-16 mt-16 mb-16">
                      <h5>{{ 'WITHDRAWN_SEIZURE_PROPERTY.COLLATERAL.GROUP_CARD_TITLE' | translate }}</h5>
                    </div>
                  </ng-container>
                </div>

                <div fxFlex="70" fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="20px">
                  <ng-container *ngIf="propertyConfig?.hasAdd">
                    <div fxLayout="row" fxLayoutAlign="center center">
                      <button mat-stroked-button class="medium-aw-button mt-2 mb-10 fs-16" (click)="addMoreProperty()">
                        <mat-icon [svgIcon]="'icon-Plus'" class="icon icon-xmedium"></mat-icon>
                        เพิ่มรายการทรัพย์
                      </button>
                    </div>
                  </ng-container>
                  <ng-container *ngIf="propertyConfig?.hasTitleTotal">
                    <span class="text-end total-label">
                      ทั้งหมด:
                      <span class="total-number bold">{{
                        collateralsSource.data.length + collateralsSourceAsset.data.length
                      }}</span>
                    </span>
                  </ng-container>
                </div>
              </div>
              <div fxLayout="row" *ngIf="propertyConfig?.hasAdd" fxLayoutAlign="space-between center" class="wsp-title">
                <div fxFlex="">
                  <ng-container
                    *ngIf="propertyConfig?.hasTitle && (config.tabCollapse || config.tabCollapse === undefined)">
                    <div class="title-text pt-16 pb-16 mt-16 mb-16">
                      <h6>ทรัพย์จำนอง</h6>
                    </div>
                  </ng-container>
                </div>

                <div
                  fxFlex="70"
                  *ngIf="!propertyConfig?.hasAdd"
                  fxLayout="row"
                  fxLayoutAlign="end center"
                  fxLayoutGap="20px">
                  <!-- <ng-container *ngIf="propertyConfig?.hasAdd">
                    <div fxLayout="row" fxLayoutAlign="center center">
                      <button mat-stroked-button class="medium-aw-button mt-2 mb-10" (click)="addMoreProperty()">
                        <mat-icon [svgIcon]="'icon-Plus'" class="icon icon-xmedium"></mat-icon>
                        เพิ่ม
                      </button>
                    </div>
                  </ng-container> -->
                  <ng-container *ngIf="propertyConfig?.hasTitleTotal">
                    <span class="text-end total-label">
                      ทั้งหมด:
                      <span class="total-number bold">{{ collateralsSource.data.length }}</span>
                    </span>
                  </ng-container>
                  <ng-container *ngIf="propertyConfig.hasTotalSelect">
                    <span class="text-end total-label mr-0">
                      เลือก:
                      <span class="total-number bold"
                        >{{ selection.selected.length }} จาก {{ collaterals.length }}</span
                      >
                    </span>
                  </ng-container>
                  <div *ngIf="propertyConfig.hasTotalSelect && propertyConfig.hasSumAppraisalValue">
                    <span class="divider-vertical ml-0 mr-0"></span>
                  </div>
                  <ng-container *ngIf="propertyConfig.hasSumAppraisalValue">
                    <span class="text-end total-label">
                      ราคาประเมินรวมของราชการ (บาท):
                      <span class="total-number bold">{{ sumTotalAppraisalValue | numberDecimal }}</span>
                    </span>
                  </ng-container>
                </div>
              </div>
              <div fxLayout="row" fxLayoutAlign="end center" class="wsp-title">
                <spig-error-msg [control]="tablePropertyControl" [customErrorMsg]="'กรุณาเลือกทรัพย์ที่ต้องการถอน'">
                </spig-error-msg>
              </div>
              <div fxLayout="row">
                <div fxFlex="15" *ngIf="!(config.tabCollapse || config.tabCollapse === undefined)">
                  <h6>รายการทรัพย์จำนอง</h6>
                </div>
                <div [fxFlex]="config.tabCollapse || config.tabCollapse === undefined ? '100' : '85'">
                  <ng-container>
                    <div class="table-scroll section" table-scroll>
                      <table mat-table id="withdrawn-table" [dataSource]="collateralsSource.filteredData">
                        <ng-container *ngIf="propertyConfig?.hasSelect" matColumnDef="selection" sticky>
                          <th mat-header-cell *matHeaderCellDef>
                            <mat-checkbox
                              (change)="$event ? toggleAllRows() : null"
                              [checked]="selection.hasValue() && isAllSelected()"
                              [indeterminate]="hasValue() && !isAllSelected()">
                            </mat-checkbox>
                          </th>
                          <td mat-cell *matCellDef="let element">
                            <mat-checkbox
                              (click)="$event.stopPropagation()"
                              (change)="$event ? onCheckboxChange(element) : null"
                              [checked]="selection.isSelected(element.collateralId)">
                            </mat-checkbox>
                          </td>
                        </ng-container>
                        <ng-container matColumnDef="orderNumber" sticky>
                          <th mat-header-cell *matHeaderCellDef class="text-center" columnElevationLeft>
                            {{ 'COMMON.LABEL_NO' | translate }}
                          </th>
                          <td mat-cell *matCellDef="let element; let i = index" class="text-center" columnElevationLeft>
                            {{ indexTable(i) }}
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="collateralId">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>เลขที่หลักประกัน</th>
                          <td class="text-left" mat-cell *matCellDef="let element">
                            <div>
                              <span>
                                {{ element.collateralId }}
                              </span>
                            </div>

                            <ng-container *ngIf="element.status === LEXS_STATUS.SOLD">
                              <div class="status-label status-failed m-auto">ไม่สามารถถอน<br />ยึดทรัพย์ได้</div>
                            </ng-container>
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="collateralTypeDesc">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>ประเภททรัพย์</th>
                          <td class="text-left" mat-cell *matCellDef="let element">
                            <span>
                              {{ element.collateralType || '-' }}
                            </span>
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="collateralSubTypeDesc">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>ประเภทย่อย</th>
                          <td class="text-left" mat-cell *matCellDef="let element">
                            <span>{{ element.collateralSubType || '-' }}</span>
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="documentNo">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>เลขที่เอกสารสิทธิ์</th>
                          <td class="text-left" mat-cell *matCellDef="let element">
                            <span>{{ element.documentNo || '-' }}</span>
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="collateralDetails">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>รายละเอียดทรัพย์</th>
                          <td class="text-left" mat-cell *matCellDef="let element">
                            <span>{{ element.collateralDetails || '-' }}</span>
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="ownerId">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>เจ้าของกรรมสิทธิ์</th>
                          <td class="text-left" mat-cell *matCellDef="let element">
                            <ng-container *ngIf="isEditMode; else ledViewMode">
                              <span>{{
                                element.owners || element.ownerId || element.ownerFullName || element.ownerName || '-'
                              }}</span>
                            </ng-container>
                            <ng-template #ledViewMode>
                              <span>{{
                                element.owners || element.ownerId || element.ownerFullName || element.ownerName
                                  | ownerName
                              }}</span>
                            </ng-template>
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="totalAppraisalValue">
                          <th mat-header-cell *matHeaderCellDef class="new-line text-right">
                            <div fxLayout="row" fxLayoutAlign="end start">
                              <div fxLayout="row" fxLayoutAlign="end start" fxFlex="5">
                                {{ 'SEIZURE_PROPERTY.SEIZURE_LIST_INFO.TOTAL_APPRAISAL_VALUE' | translate }}
                              </div>
                              <div fxLayout="row" fxLayoutAlign="center end">
                                <app-tooltip
                                  [iconClass]="'icon-small  icon-fill-white mt-10'"
                                  [params]="[
                                    { content: 'ราคาประเมินของธนาคาร: ' + 'ทรัพย์จำนอง' },
                                    { content: 'ราคาประเมินราชการ: ' + 'ทรัพย์นอกจำนอง' },
                                  ]">
                                </app-tooltip>
                              </div>
                            </div>
                          </th>
                          <td mat-cell *matCellDef="let element" class="text-right">
                            <span>{{ element.totalAppraisalValue | numberDecimal }}</span>
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="ledRefNo">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>เลขที่เก็บ</th>
                          <td class="text-left" mat-cell *matCellDef="let element">
                            <span>{{ element.ledRefNo || '-' }}</span>
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="ledName">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>สำนักงานบังคับคดี</th>
                          <td class="text-left" mat-cell *matCellDef="let element">
                            <span>{{ element.ledName || '-' }}</span>
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="status" [stickyEnd]="true">
                          <th mat-header-cell *matHeaderCellDef columnElevationRight class="text-center">
                            สถานะทรัพย์
                            <br />
                            (LEXS)
                          </th>

                          <td mat-cell *matCellDef="let element" class="text-center" columnElevationRight>
                            <div fxLayout="row" fxLayoutAlign="center center">
                              <ng-container *ngIf="!element.status || element.status === '-'">
                                <span>-</span>
                              </ng-container>
                              <ng-container *ngIf="element.status === LEXS_STATUS.PLEDGE">
                                <div class="status-label status-normal m-auto">ไม่ถูกยึด / อายัด / ขาย</div>
                              </ng-container>
                              <ng-container *ngIf="element.status === LEXS_STATUS.SEIZURED">
                                <div class="status-label status-success m-auto">ยึดทรัพย์แล้ว</div>
                              </ng-container>

                              <ng-container *ngIf="element.status === LEXS_STATUS.ON_SALE">
                                <div class="status-label status-pending m-auto">อยู่ระหว่างขายทอดตลาด</div>
                              </ng-container>

                              <ng-container *ngIf="element.status === LEXS_STATUS.PENDING_SALE">
                                <div class="status-label status-pending m-auto">รอประกาศขายทอดตลาดใหม่</div>
                              </ng-container>
                              <ng-container *ngIf="element.status === LEXS_STATUS.SOLD">
                                <div class="status-label status-success m-auto">
                                  <mat-icon
                                    svgIcon="icon-Mark"
                                    class="icon icon-small-xl fill-krungthai-green mr-4"></mat-icon
                                  >ขายทอดตลาดแล้ว
                                </div>
                              </ng-container>
                            </div>
                          </td>
                        </ng-container>

                        <ng-container *ngIf="propertyConfig?.hasAction" matColumnDef="action" [stickyEnd]="true">
                          <th class="text-center action-cell" mat-header-cell *matHeaderCellDef>
                            {{ 'COMMON.LABEL_COMMAND' | translate }}
                          </th>
                          <td mat-cell class="action-cell" *matCellDef="let element">
                            <ng-container *ngIf="element.status !== LEXS_STATUS.SOLD; else elseTemplate">
                              <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="30px">
                                <ng-container *ngIf="propertyConfig.hasDelete">
                                  <span (click)="deleteProperty(element)" class="link link-red">{{
                                    'COMMON.BUTTON_DELETE' | translate
                                  }}</span>
                                </ng-container>
                                <ng-container *ngIf="propertyConfig.hasEdit">
                                  <span (click)="editProperty(element)" class="link">{{
                                    'COMMON.BUTTON_EDIT' | translate
                                  }}</span>
                                </ng-container>
                              </div>
                            </ng-container>
                            <ng-template #elseTemplate>
                              <span>&nbsp;</span>
                            </ng-template>
                          </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="collateralColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: collateralColumns"></tr>
                      </table>
                    </div>

                    <app-message-empty
                      *ngIf="!collateralsSource || allCurrentData.length === 0"
                      message="ไม่มีรายการที่เกี่ยวข้อง">
                    </app-message-empty>

                    <app-paginator
                      *ngIf="allCurrentData.length > 0"
                      #paginator
                      [pageSize]="pageSize"
                      [length]="allCurrentData.length"
                      (page)="onPaging($event)"></app-paginator>
                  </ng-container>
                </div>
              </div>
            </div>
          </mat-expansion-panel>
        </ng-container>
        <ng-template #nodataForAddPropertyModal>
          <ng-container *ngIf="!(config.tabCollapse || config.tabCollapse === undefined)">
            <div class="inner-container">
              <div fxLayout="row" fxLayoutAlign="end center" class="wsp-title">
                <spig-error-msg [control]="tablePropertyControl" [customErrorMsg]="'กรุณาเลือกทรัพย์ที่ต้องการถอน'">
                </spig-error-msg>
              </div>
              <div fxLayout="row">
                <div fxFlex="15" *ngIf="!(config.tabCollapse || config.tabCollapse === undefined)">
                  <h6>รายการทรัพย์จำนอง</h6>
                </div>
                <div [fxFlex]="config.tabCollapse || config.tabCollapse === undefined ? '100' : '85'">
                  <ng-container>
                    <div class="table-scroll section" table-scroll>
                      <table mat-table id="withdrawn-table">
                        <ng-container matColumnDef="orderNumber">
                          <th mat-header-cell *matHeaderCellDef class="text-center">
                            {{ 'COMMON.LABEL_NO' | translate }}
                          </th>
                        </ng-container>

                        <ng-container matColumnDef="collateralId">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>เลขที่หลักประกัน</th>
                        </ng-container>

                        <ng-container matColumnDef="collateralTypeDesc">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>ประเภททรัพย์</th>
                        </ng-container>

                        <ng-container matColumnDef="collateralSubTypeDesc">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>ประเภทย่อย</th>
                        </ng-container>

                        <ng-container matColumnDef="documentNo">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>เลขที่เอกสารสิทธิ์</th>
                        </ng-container>

                        <ng-container matColumnDef="collateralDetails">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>รายละเอียดทรัพย์</th>
                        </ng-container>

                        <ng-container matColumnDef="ownerId">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>เจ้าของกรรมสิทธิ์</th>
                        </ng-container>

                        <ng-container matColumnDef="totalAppraisalValue">
                          <th mat-header-cell *matHeaderCellDef class="new-line text-right">
                            <div fxLayout="row" fxLayoutAlign="end start">
                              <div fxLayout="row" fxLayoutAlign="end start" fxFlex="5">
                                {{ 'SEIZURE_PROPERTY.SEIZURE_LIST_INFO.TOTAL_APPRAISAL_VALUE' | translate }}
                              </div>
                              <div fxLayout="row" fxLayoutAlign="center end">
                                <app-tooltip
                                  [iconClass]="'icon-small  icon-fill-white mt-10'"
                                  [params]="[
                                    { content: 'ราคาประเมินของธนาคาร: ' + 'ทรัพย์จำนอง' },
                                    { content: 'ราคาประเมินราชการ: ' + 'ทรัพย์นอกจำนอง' },
                                  ]">
                                </app-tooltip>
                              </div>
                            </div>
                          </th>
                        </ng-container>

                        <ng-container matColumnDef="ledRefNo">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>เลขที่เก็บ</th>
                        </ng-container>

                        <ng-container matColumnDef="ledName">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>สำนักงานบังคับคดี</th>
                        </ng-container>

                        <ng-container matColumnDef="status" [stickyEnd]="true">
                          <th mat-header-cell *matHeaderCellDef columnElevationRight class="text-center">
                            สถานะทรัพย์
                            <br />
                            (LEXS)
                          </th>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="collateralColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: collateralColumns"></tr>
                      </table>
                    </div>

                    <app-message-empty
                      *ngIf="!collateralsSource || allCurrentData.length === 0"
                      [message]="'COMMON.SEARCH_NOT_FOUND'">
                    </app-message-empty>

                    <app-paginator
                      *ngIf="allCurrentData.length > 0"
                      #paginator
                      [pageSize]="pageSize"
                      [length]="allCurrentData.length"
                      (page)="onPaging($event)"></app-paginator>
                  </ng-container>
                </div>
              </div>
            </div>
          </ng-container>
        </ng-template>

        <!-- เอกสารทรัพย์จำนอง -->
        <ng-container
          *ngIf="
            this.stepIndex !== 1 && propertyConfig?.hasUploadDocument && documentUpload && documentUpload.length > 0
          ">
          <div
            *ngIf="!propertyConfig?.hasAdd"
            fxLayout="row"
            fxLayoutAlign="space-between center"
            class="pa-8 mt-16 app-document-header bg-l-gray"
            fxLayoutGap="24">
            <div fxLayoutAlign="flex-start stretch" fxLayoutGap="24">
              <div fxLayoutAlign="start center" fxLayoutGap="24">
                <h6 class="my-0 title-bar-color">{{ 'เอกสารทรัพย์จำนอง' | translate }}</h6>
              </div>
            </div>
            <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="32">
              <div class="wsp-title">
                <span class="text-end total-label">
                  ทั้งหมด:
                  <span class="total-number bold">{{ documentUpload.length }}</span>
                </span>
              </div>
              <div class="expand-button mr-16" (click)="expandPanelDocument()">
                <mat-icon
                  [svgIcon]="!!expandedDocument ? 'icon-Slide-Hide' : 'icon-Expand'"
                  class="icon icon-xmedium icon-hide-show title-bar-color">
                </mat-icon>
                <span class="ml-6">{{
                  !!expandedDocument
                    ? ('COMMON.ICON_EXPANSION_HIDE' | translate)
                    : ('COMMON.ICON_EXPANSION_SHOW' | translate)
                }}</span>
              </div>
            </div>
          </div>
          <mat-expansion-panel class="padding-zero" [expanded]="expandedDocument">
            <div class="inner-container">
              <div fxLayout="row" *ngIf="propertyConfig?.hasAdd" fxLayoutAlign="space-between center" class="wsp-title">
                <div fxFlex="">
                  <ng-container>
                    <div class="title-text pt-16 pb-16 mt-16 mb-16">
                      <h5>{{ 'เอกสารทรัพย์จำนอง' | translate }}</h5>
                    </div>
                  </ng-container>
                </div>
              </div>
              <app-withdrawn-seizure-property-upload-document
                [isAsset]="false"
                [fromProperty]="true"
                [hideBanner]="true"
                [title]="'รายการเอกสาร'"
                [hideTitle]="true"
                [documentList]="true"
                [documentUpload]="documentUpload"
                [isUploadReadOnly]="propertyConfig.uploadReadOnly || false"
                [uploadMultiInfo]="uploadMultiInfo"
                (onDownLoadForm)="downLoadForm()"
                [formUploadControl]="getControls"
                (onUploadFileEvent)="uploadFileEvent($event)"></app-withdrawn-seizure-property-upload-document>
            </div>
          </mat-expansion-panel>
        </ng-container>

        <!-- ทรัพย์นอกจำนอง -->
        <ng-container
          *ngIf="
            collateralsSourceAsset.data && collateralsSourceAsset.data.length > 0;
            else nodataForAddPropertyModalAsset
          ">
          <div
            *ngIf="!propertyConfig?.hasAdd && (config.tabCollapse || config.tabCollapse === undefined)"
            fxLayout="row"
            fxLayoutAlign="space-between center"
            class="pa-8 mt-16 app-document-header bg-l-gray"
            fxLayoutGap="24">
            <div fxLayoutAlign="flex-start stretch" fxLayoutGap="24">
              <div fxLayoutAlign="start center" fxLayoutGap="24">
                <h6 class="my-0 title-bar-color">{{ 'ทรัพย์นอกจำนอง' | translate }}</h6>
              </div>
            </div>
            <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="32">
              <div class="wsp-title">
                <span class="text-end total-label">
                  ทั้งหมด:
                  <span class="total-number bold">{{ collateralsSourceAsset.data.length }}</span>
                </span>
              </div>
              <div class="expand-button mr-16" (click)="expandPanelOther()">
                <mat-icon
                  [svgIcon]="!!expandedOther ? 'icon-Slide-Hide' : 'icon-Expand'"
                  class="icon icon-xmedium icon-hide-show title-bar-color">
                </mat-icon>
                <span class="ml-6">{{
                  !!expandedOther
                    ? ('COMMON.ICON_EXPANSION_HIDE' | translate)
                    : ('COMMON.ICON_EXPANSION_SHOW' | translate)
                }}</span>
              </div>
            </div>
          </div>

          <mat-expansion-panel class="padding-zero" [expanded]="expandedOther">
            <div class="inner-container">
              <ng-container *ngIf="hasSoldIteAsset && !hasSoldItem">
                <app-message-banner
                  type="warn-normal"
                  [message]="
                    'รายการทรัพย์มีการเปลี่ยนแปลงเนื่องจากบางทรัพย์ไม่สามารถถอนยึดทรัพย์ได้'
                  "></app-message-banner>
              </ng-container>
              <ng-container *ngIf="assetConfig.hasFilter">
                <div class="search-section pb-8" fxLayout="row" fxLayoutAlign="center start" fxLayoutGap="12px">
                  <div fxFlex>
                    <spig-dropdown
                      classInput="input-xsm icon"
                      [formControl]="typeFilterControl"
                      [config]="dropdownFilterTypeConfig"
                      [options]="typeAssetFilterOption"
                      (selectedOption)="applyFilterAsset($event, TABLE_FILTER_KEY.TYPE)">
                    </spig-dropdown>
                  </div>
                  <div fxFlex>
                    <spig-dropdown
                      classInput="input-xsm icon"
                      [formControl]="statusFilterControl"
                      [config]="dropdownFilterStatusConfig"
                      [options]="statusFilterOption"
                      (selectedOption)="applyFilterAsset($event, TABLE_FILTER_KEY.STATUS)"></spig-dropdown>
                  </div>
                  <div fxFlex>
                    <spig-dropdown
                      classInput="input-xsm icon"
                      [config]="dropdownNoSortConfig"
                      [options]="sortNoOption"
                      [formControl]="sortNoFilterControl"
                      (selectedOption)="sortSelectedAsset($event)"></spig-dropdown>
                  </div>
                </div>
              </ng-container>
              <div
                *ngIf="propertyConfig?.hasAdd && collateralsSource?.data?.length === 0"
                fxLayout="row"
                fxLayoutAlign="space-between center"
                class="wsp-title">
                <div fxFlex="">
                  <ng-container
                    *ngIf="propertyConfig?.hasTitle && (config.tabCollapse || config.tabCollapse === undefined)">
                    <div class="title-text pt-16 pb-16 mt-16 mb-16">
                      <h5>{{ 'WITHDRAWN_SEIZURE_PROPERTY.COLLATERAL.GROUP_CARD_TITLE' | translate }}</h5>
                    </div>
                  </ng-container>
                </div>

                <div fxFlex="70" fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="20px">
                  <ng-container *ngIf="propertyConfig?.hasAdd">
                    <div fxLayout="row" fxLayoutAlign="center center">
                      <button mat-stroked-button class="medium-aw-button mt-2 mb-10 fs-16" (click)="addMoreProperty()">
                        <mat-icon [svgIcon]="'icon-Plus'" class="icon icon-xmedium"></mat-icon>
                        เพิ่มรายการทรัพย์
                      </button>
                    </div>
                  </ng-container>
                  <ng-container *ngIf="propertyConfig?.hasTitleTotal">
                    <span class="text-end total-label">
                      ทั้งหมด:
                      <span class="total-number bold">{{
                        collateralsSource.data.length + collateralsSourceAsset.data.length
                      }}</span>
                    </span>
                  </ng-container>
                </div>
              </div>

              <div *ngIf="propertyConfig?.hasAdd" fxLayout="row" fxLayoutAlign="space-between center" class="wsp-title">
                <div fxFlex="">
                  <ng-container
                    *ngIf="assetConfig?.hasTitle && (config.tabCollapse || config.tabCollapse === undefined)">
                    <div class="title-text pt-16 pb-16 mt-16 mb-16">
                      <h5>ทรัพย์นอกจำนอง</h5>
                    </div>
                  </ng-container>
                </div>

                <div
                  fxFlex="70"
                  *ngIf="!propertyConfig?.hasAdd"
                  fxLayout="row"
                  fxLayoutAlign="end center"
                  fxLayoutGap="20px">
                  <!-- <ng-container *ngIf="assetConfig?.hasAdd">
                    <div fxLayout="row" fxLayoutAlign="center center">
                      <button mat-stroked-button class="medium-aw-button mt-2 mb-10" (click)="addMorePropertyAsset()">
                        <mat-icon [svgIcon]="'icon-Plus'" class="icon icon-xmedium"></mat-icon>
                        เพิ่ม
                      </button>
                    </div>
                  </ng-container> -->
                  <ng-container *ngIf="assetConfig?.hasTitleTotal && !assetConfig?.hasAdd">
                    <span class="text-end total-label">
                      ทั้งหมด:
                      <span class="total-number bold">{{ collateralsSourceAsset.data.length }}</span>
                    </span>
                  </ng-container>
                  <ng-container *ngIf="assetConfig.hasTotalSelect">
                    <span class="text-end total-label mr-0">
                      เลือก:
                      <span class="total-number bold">{{ selectionAsset.selected.length }} จาก {{ asset.length }}</span>
                    </span>
                  </ng-container>
                  <div *ngIf="assetConfig.hasTotalSelect && assetConfig.hasSumAppraisalValue">
                    <span class="divider-vertical ml-0 mr-0"></span>
                  </div>
                  <ng-container *ngIf="assetConfig.hasSumAppraisalValue">
                    <span class="text-end total-label">
                      ราคาประเมินรวมของราชการ (บาท):
                      <span class="total-number bold">{{ sumTotalAppraisalValueAsset | numberDecimal }}</span>
                    </span>
                  </ng-container>
                </div>
              </div>
              <div fxLayout="row" fxLayoutAlign="end center" class="wsp-title">
                <spig-error-msg
                  [control]="tablePropertyAssetControl"
                  [customErrorMsg]="'กรุณาเลือกทรัพย์ที่ต้องการถอน'">
                </spig-error-msg>
              </div>
              <div fxLayout="row">
                <div fxFlex="15" *ngIf="!(config.tabCollapse || config.tabCollapse === undefined)">
                  <h6>รายการทรัพย์นอกจำนอง</h6>
                </div>
                <div [fxFlex]="config.tabCollapse || config.tabCollapse === undefined ? '100' : '85'">
                  <ng-container>
                    <div class="table-scroll section" table-scroll>
                      <table mat-table id="withdrawn-table" [dataSource]="collateralsSourceAsset.filteredData">
                        <ng-container *ngIf="assetConfig?.hasSelect" matColumnDef="selection" sticky>
                          <th mat-header-cell *matHeaderCellDef columnElevationLeft>
                            <mat-checkbox
                              (change)="$event ? toggleAllRowsAsset() : null"
                              [checked]="selectionAsset.hasValue() && isAllSelectedAsset()"
                              [indeterminate]="hasValueAsset() && !isAllSelectedAsset()">
                            </mat-checkbox>
                          </th>
                          <td mat-cell *matCellDef="let element" columnElevationLeft>
                            <mat-checkbox
                              (click)="$event.stopPropagation()"
                              (change)="$event ? onCheckboxChangeAsset(element) : null"
                              [checked]="selectionAsset.isSelected(element.assetId.toString())">
                            </mat-checkbox>
                          </td>
                        </ng-container>
                        <ng-container matColumnDef="orderNumber">
                          <th mat-header-cell *matHeaderCellDef class="text-center">
                            {{ 'COMMON.LABEL_NO' | translate }}
                          </th>
                          <td mat-cell *matCellDef="let element; let i = index" class="text-center">
                            {{ indexTableAsset(i) }}
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="collateralTypeDesc">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>ประเภททรัพย์</th>
                          <td class="text-left" mat-cell *matCellDef="let element">
                            <span>
                              {{ element.assetTypeDesc || '-' }}
                            </span>
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="collateralSubTypeDesc">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>ประเภทย่อย</th>
                          <td class="text-left" mat-cell *matCellDef="let element">
                            <span>{{ element.assetSubTypeDesc || '-' }}</span>
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="documentNo">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>เลขที่เอกสารสิทธิ์</th>
                          <td class="text-left" mat-cell *matCellDef="let element">
                            <div>
                              <span>{{ element.documentNo || '-' }}</span>
                            </div>

                            <ng-container *ngIf="element.collateralCaseLexStatus === LEXS_STATUS.SOLD">
                              <div class="status-label status-failed m-auto">ไม่สามารถถอน<br />ยึดทรัพย์ได้</div>
                            </ng-container>
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="collateralDetails">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>รายละเอียดทรัพย์</th>
                          <td class="text-left" mat-cell *matCellDef="let element">
                            <span>{{ element.collateralDetails || '-' }}</span>
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="ownerId">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>เจ้าของกรรมสิทธิ์</th>
                          <td class="text-left" mat-cell *matCellDef="let element">
                            <ng-container *ngIf="isEditModeAsset; else ledViewMode">
                              <span>{{
                                element.owners || element.ownerId || element.ownerFullName || element.ownerName || '-'
                              }}</span>
                            </ng-container>
                            <ng-template #ledViewMode>
                              <span>{{
                                element.owners || element.ownerId || element.ownerFullName || element.ownerName
                                  | ownerName
                              }}</span>
                            </ng-template>
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="totalAppraisalValue">
                          <th mat-header-cell *matHeaderCellDef class="new-line text-right">
                            <div fxLayout="row" fxLayoutAlign="end start">
                              <div fxLayout="row" fxLayoutAlign="end start" fxFlex="5">
                                {{ 'SEIZURE_PROPERTY.SEIZURE_LIST_INFO.TOTAL_APPRAISAL_VALUE' | translate }}
                              </div>
                              <div fxLayout="row" fxLayoutAlign="center end">
                                <app-tooltip
                                  [iconClass]="'icon-small  icon-fill-white mt-10'"
                                  [params]="[
                                    { content: 'ราคาประเมินของธนาคาร: ' + 'ทรัพย์จำนอง' },
                                    { content: 'ราคาประเมินราชการ: ' + 'ทรัพย์นอกจำนอง' },
                                  ]">
                                </app-tooltip>
                              </div>
                            </div>
                          </th>
                          <td mat-cell *matCellDef="let element" class="text-right">
                            <span>{{ (element.totalAppraisalValue | numberDecimal) || '-' }}</span>
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="ledRefNo">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>เลขที่เก็บ</th>
                          <td class="text-left" mat-cell *matCellDef="let element">
                            <span>{{ element.ledRefNo || '-' }}</span>
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="ledName">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>สำนักงานบังคับคดี</th>
                          <td class="text-left" mat-cell *matCellDef="let element">
                            <span>{{ element.ledName || '-' }}</span>
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="obligationStatus">
                          <th mat-header-cell *matHeaderCellDef class="text-center min-width-135px">
                            {{ 'สถานะทรัพย์ที่สืบพบ' | translate }}
                          </th>
                          <td mat-cell *matCellDef="let element" class="text-center min-width-135px">
                            <div class="status-label status-normal m-auto">
                              {{ element.obligationStatus || 'ไม่มี' }}
                            </div>
                          </td>
                        </ng-container>

                        <ng-container matColumnDef="status" [stickyEnd]="true">
                          <th mat-header-cell *matHeaderCellDef columnElevationRight class="text-center">
                            สถานะทรัพย์ <br />
                            (LEXS)
                          </th>

                          <td mat-cell *matCellDef="let element" class="text-center" columnElevationRight>
                            <div fxLayout="row" fxLayoutAlign="center center">
                              <ng-container
                                *ngIf="!element.collateralCaseLexStatus || element.collateralCaseLexStatus === '-'">
                                <span>-</span>
                              </ng-container>
                              <ng-container *ngIf="element.collateralCaseLexStatus === LEXS_STATUS.PLEDGE">
                                <div class="status-label status-normal m-auto">ไม่ถูกยึด / อายัด / ขาย</div>
                              </ng-container>
                              <ng-container *ngIf="element.collateralCaseLexStatus === LEXS_STATUS.SEIZURED">
                                <div class="status-label status-success m-auto">ยึดทรัพย์แล้ว</div>
                              </ng-container>

                              <ng-container *ngIf="element.collateralCaseLexStatus === LEXS_STATUS.ON_SALE">
                                <div class="status-label status-pending m-auto">อยู่ระหว่างขายทอดตลาด</div>
                              </ng-container>

                              <ng-container *ngIf="element.collateralCaseLexStatus === LEXS_STATUS.PENDING_SALE">
                                <div class="status-label status-pending m-auto">รอประกาศขายทอดตลาดใหม่</div>
                              </ng-container>
                              <ng-container *ngIf="element.collateralCaseLexStatus === LEXS_STATUS.SOLD">
                                <div class="status-label status-success m-auto">
                                  <mat-icon
                                    svgIcon="icon-Mark"
                                    class="icon icon-small-xl fill-krungthai-green mr-4"></mat-icon
                                  >ขายทอดตลาดแล้ว
                                </div>
                              </ng-container>
                            </div>
                          </td>
                        </ng-container>

                        <ng-container *ngIf="assetConfig?.hasAction" matColumnDef="action" [stickyEnd]="true">
                          <th class="text-center action-cell" mat-header-cell *matHeaderCellDef>
                            {{ 'COMMON.LABEL_COMMAND' | translate }}
                          </th>
                          <td mat-cell class="action-cell" *matCellDef="let element">
                            <ng-container
                              *ngIf="element.collateralCaseLexStatus !== LEXS_STATUS.SOLD; else elseTemplate">
                              <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="30px">
                                <ng-container *ngIf="assetConfig.hasDelete">
                                  <span (click)="deletePropertyAsset(element)" class="link link-red">{{
                                    'COMMON.BUTTON_DELETE' | translate
                                  }}</span>
                                </ng-container>
                                <ng-container *ngIf="assetConfig.hasEdit">
                                  <span (click)="editPropertyAsset(element)" class="link">{{
                                    'COMMON.BUTTON_EDIT' | translate
                                  }}</span>
                                </ng-container>
                              </div>
                            </ng-container>
                            <ng-template #elseTemplate>
                              <span>&nbsp;</span>
                            </ng-template>
                          </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="assetColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: assetColumns"></tr>
                      </table>
                    </div>

                    <app-message-empty
                      *ngIf="!collateralsSourceAsset || allCurrentDataAsset.length === 0"
                      message="ไม่มีรายการที่เกี่ยวข้อง">
                    </app-message-empty>

                    <app-paginator
                      *ngIf="allCurrentDataAsset.length > 0"
                      #paginator1
                      [pageSize]="pageSizeAsset"
                      [length]="allCurrentDataAsset.length"
                      (page)="onPagingAsset($event)"></app-paginator>
                  </ng-container>
                </div>
              </div>
            </div>
          </mat-expansion-panel>
        </ng-container>
        <ng-template #nodataForAddPropertyModalAsset>
          <ng-container *ngIf="!(config.tabCollapse || config.tabCollapse === undefined)">
            <div class="inner-container">
              <div fxLayout="row" fxLayoutAlign="end center" class="wsp-title">
                <spig-error-msg
                  [control]="tablePropertyAssetControl"
                  [customErrorMsg]="'กรุณาเลือกทรัพย์ที่ต้องการถอน'">
                </spig-error-msg>
              </div>
              <div fxLayout="row">
                <div fxFlex="15" *ngIf="!(config.tabCollapse || config.tabCollapse === undefined)">
                  <h6>รายการทรัพย์นอกจำนอง</h6>
                </div>
                <div [fxFlex]="config.tabCollapse || config.tabCollapse === undefined ? '100' : '85'">
                  <ng-container>
                    <div class="table-scroll section" table-scroll>
                      <table mat-table id="withdrawn-table">
                        <ng-container matColumnDef="orderNumber">
                          <th mat-header-cell *matHeaderCellDef class="text-center">
                            {{ 'COMMON.LABEL_NO' | translate }}
                          </th>
                        </ng-container>

                        <ng-container matColumnDef="collateralTypeDesc">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>ประเภททรัพย์</th>
                        </ng-container>

                        <ng-container matColumnDef="collateralSubTypeDesc">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>ประเภทย่อย</th>
                        </ng-container>

                        <ng-container matColumnDef="documentNo">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>เลขที่เอกสารสิทธิ์</th>
                        </ng-container>

                        <ng-container matColumnDef="collateralDetails">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>รายละเอียดทรัพย์</th>
                        </ng-container>

                        <ng-container matColumnDef="ownerId">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>เจ้าของกรรมสิทธิ์</th>
                        </ng-container>

                        <ng-container matColumnDef="totalAppraisalValue">
                          <th mat-header-cell *matHeaderCellDef class="new-line text-right">
                            <div fxLayout="row" fxLayoutAlign="end start">
                              <div fxLayout="row" fxLayoutAlign="end start" fxFlex="5">
                                {{ 'SEIZURE_PROPERTY.SEIZURE_LIST_INFO.TOTAL_APPRAISAL_VALUE' | translate }}
                              </div>
                              <div fxLayout="row" fxLayoutAlign="center end">
                                <app-tooltip
                                  [iconClass]="'icon-small  icon-fill-white mt-10'"
                                  [params]="[
                                    { content: 'ราคาประเมินของธนาคาร: ' + 'ทรัพย์จำนอง' },
                                    { content: 'ราคาประเมินราชการ: ' + 'ทรัพย์นอกจำนอง' },
                                  ]">
                                </app-tooltip>
                              </div>
                            </div>
                          </th>
                        </ng-container>

                        <ng-container matColumnDef="ledRefNo">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>เลขที่เก็บ</th>
                        </ng-container>

                        <ng-container matColumnDef="ledName">
                          <th class="text-left" mat-header-cell *matHeaderCellDef>สำนักงานบังคับคดี</th>
                        </ng-container>

                        <ng-container matColumnDef="obligationStatus">
                          <th mat-header-cell *matHeaderCellDef class="text-center min-width-135px">
                            {{ 'สถานะทรัพย์ที่สืบพบ' | translate }}
                          </th>
                        </ng-container>

                        <ng-container matColumnDef="status" [stickyEnd]="true">
                          <th mat-header-cell *matHeaderCellDef columnElevationRight class="text-center">
                            สถานะทรัพย์ <br />
                            (LEXS)
                          </th>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="assetColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: assetColumns"></tr>
                      </table>
                    </div>

                    <app-message-empty
                      *ngIf="!collateralsSourceAsset || allCurrentDataAsset.length === 0"
                      [message]="'COMMON.SEARCH_NOT_FOUND'">
                    </app-message-empty>

                    <app-paginator
                      *ngIf="allCurrentDataAsset.length > 0"
                      #paginator1
                      [pageSize]="pageSizeAsset"
                      [length]="allCurrentDataAsset.length"
                      (page)="onPagingAsset($event)"></app-paginator>
                  </ng-container>
                </div>
              </div>
            </div>
          </ng-container>
        </ng-template>

        <!-- เอกสารทรัพย์นอกจำนอง -->
        <ng-container
          *ngIf="
            this.stepIndex !== 1 &&
            assetConfig?.hasUploadDocument &&
            documentUploadAsset &&
            documentUploadAsset.length > 0
          ">
          <div
            *ngIf="!propertyConfig?.hasAdd"
            fxLayout="row"
            fxLayoutAlign="space-between center"
            class="pa-8 mt-16 app-document-header bg-l-gray"
            fxLayoutGap="24">
            <div fxLayoutAlign="flex-start stretch" fxLayoutGap="24">
              <div fxLayoutAlign="start center" fxLayoutGap="24">
                <h6 class="my-0 title-bar-color">{{ 'เอกสารทรัพย์นอกจำนอง' | translate }}</h6>
              </div>
            </div>
            <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="32">
              <div class="wsp-title">
                <span class="text-end total-label">
                  ทั้งหมด:
                  <span class="total-number bold">{{ documentUploadAsset.length }}</span>
                </span>
              </div>
              <div class="expand-button mr-16" (click)="expandPanelDocumentOther()">
                <mat-icon
                  [svgIcon]="!!expandedDocumentOther ? 'icon-Slide-Hide' : 'icon-Expand'"
                  class="icon icon-xmedium icon-hide-show title-bar-color">
                </mat-icon>
                <span class="ml-6">{{
                  !!expandedDocumentOther
                    ? ('COMMON.ICON_EXPANSION_HIDE' | translate)
                    : ('COMMON.ICON_EXPANSION_SHOW' | translate)
                }}</span>
              </div>
            </div>
          </div>
          <mat-expansion-panel class="padding-zero" [expanded]="expandedDocumentOther">
            <div class="inner-container">
              <div fxLayout="row" *ngIf="propertyConfig?.hasAdd" fxLayoutAlign="space-between center" class="wsp-title">
                <div fxFlex="">
                  <ng-container>
                    <div class="title-text pt-16 pb-16 mt-16 mb-16">
                      <h5>{{ 'เอกสารทรัพย์นอกจำนอง' | translate }}</h5>
                    </div>
                  </ng-container>
                </div>
              </div>
              <app-withdrawn-seizure-property-upload-document
                [fromProperty]="true"
                [hideBanner]="true"
                [isAsset]="true"
                [title]="'รายการเอกสาร'"
                [documentList]="true"
                [hideTitle]="true"
                [documentUpload]="documentUploadAsset"
                [isUploadReadOnly]="assetConfig.uploadReadOnly || false"
                [uploadMultiInfo]="uploadMultiInfo"
                (onDownLoadForm)="downLoadForm()"
                [formUploadControl]="getControlsAsset"
                (onUploadFileEvent)="uploadFileEvent($event)"></app-withdrawn-seizure-property-upload-document>
            </div>
          </mat-expansion-panel>
        </ng-container>

        <!-- ผู้ติดต่อที่เกี่ยวข้อง -->
        <ng-container *ngIf="propertyConfig?.hasViewContact">
          <div
            *ngIf="!propertyConfig?.hasAdd"
            fxLayout="row"
            fxLayoutAlign="space-between center"
            class="pa-8 mt-16 app-document-header bg-l-gray"
            fxLayoutGap="24">
            <div fxLayoutAlign="flex-start stretch" fxLayoutGap="24">
              <div fxLayoutAlign="start center" fxLayoutGap="24">
                <h6 class="my-0 title-bar-color">{{ 'ผู้ติดต่อที่เกี่ยวข้อง' | translate }}</h6>
              </div>
            </div>

            <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="32">
              <div class="wsp-title">
                <span class="text-end total-label">
                  ทั้งหมด:
                  <span class="total-number bold">{{ contactPersons.length }}</span>
                </span>
              </div>
              <div class="expand-button mr-16" (click)="expandPanelContact()">
                <mat-icon
                  [svgIcon]="!!expandedContact ? 'icon-Slide-Hide' : 'icon-Expand'"
                  class="icon icon-xmedium icon-hide-show title-bar-color">
                </mat-icon>
                <span class="ml-6">{{
                  !!expandedContact
                    ? ('COMMON.ICON_EXPANSION_HIDE' | translate)
                    : ('COMMON.ICON_EXPANSION_SHOW' | translate)
                }}</span>
              </div>
            </div>
          </div>
          <mat-expansion-panel class="padding-zero" [expanded]="expandedContact">
            <div class="inner-container">
              <div fxLayout="row" *ngIf="propertyConfig?.hasAdd" fxLayoutAlign="space-between center" class="wsp-title">
                <div fxFlex="">
                  <ng-container>
                    <div class="title-text pt-16 pb-16 mt-16 mb-16">
                      <h5>{{ 'ผู้ติดต่อที่เกี่ยวข้อง' | translate }}</h5>
                    </div>
                  </ng-container>
                </div>
                <div fxFlex="70" fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="20px">
                  <ng-container *ngIf="propertyConfig?.hasAdd">
                    <div fxLayout="row" fxLayoutAlign="center center">
                      <button mat-stroked-button class="medium-aw-button mt-2 mb-10 fs-16" (click)="addMoreContact()">
                        <mat-icon [svgIcon]="'icon-Plus'" class="icon icon-xmedium"></mat-icon>
                        เพิ่มผู้ติดต่อ
                      </button>
                    </div>
                  </ng-container>
                </div>
              </div>
              <app-withdrawn-seizure-contact
                [contactConfig]="contactConfigView"
                [lgPersonColumn]="lgPersonColumn"
                [contactFormGroup]="control"
                [contactTypeOptions]="contactTypeOptions"
                [tableDataSource]="contactPersons"
                (onAddMoreContact)="addMoreContact()"
                (onDeleteContact)="deleteContact($event)"
                (onEditContact)="editContact($event)"></app-withdrawn-seizure-contact>
            </div>
          </mat-expansion-panel>
        </ng-container>
      </ng-template>
    </mat-expansion-panel>
  </mat-accordion>
</div>

<ng-container *ngIf="propertyConfig?.hasEditContact">
  <app-withdrawn-seizure-contact
    [contactConfig]="contactConfigEdit"
    [lgPersonColumn]="lgPersonColumn"
    [contactFormGroup]="control"
    [contactTypeOptions]="contactTypeOptions"
    [tableDataSource]="contactPersons"
    (onUpdateSelectContact)="saveContact($event)"
    [dropdownControl]="contactDDLControl"></app-withdrawn-seizure-contact>
</ng-container>
